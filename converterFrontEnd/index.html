<!DOCTYPE html>
<html>
<head>
  <title>Code Converter, Debugger & Optimizer</title>
  <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Code Converter, Debugger & Optimizer</h1>
    </div>
    <div class="options-section">
      <h2>Options</h2>
      <div class="options">
        <label for="conversionOption">Convert:</label>
        <button id ="mybtn1" type ="button">Convert</button>
        <select id="conversionOption">
          <option value="Java">Java</option>
          <option value="c++">c++</option>
          <option value="python">python</option>
          <option value="javaScript">javaScript</option>
        </select>
      </div>

      <div class="options">
        <button id ="mybtn2" type ="button">Debug</button>
      </div>

      <div class="options">
        <button id ="mybtn3" type ="button">Optimize</button>
      </div>

      <div class="options">
        <button id ="mybtn4" type ="button">findTimeComplexity</button>
      </div>

      <div class="code-editor">
        <h3>Code Input:</h3>
        <textarea id="codeInput" placeholder="Enter your code here"></textarea>
      </div>
    </div>

    <div class="response-section">
      <h2>Response</h2>
      <div class="response">
        <h3>Output:</h3>
        <div id="responseDiv"> <!-- Response content will be displayed here --> </div>
      </div>
    </div>
  </div>
</body>
</html>
<script>
  const mybtn1 = document.getElementById("mybtn1");
  const mybtn2 = document.getElementById("mybtn2");
  const mybtn3 = document.getElementById("mybtn3");
  const mybtn4 = document.getElementById("mybtn4");

  mybtn1.addEventListener("click",function(e){
    const selectedOption = document.getElementById("conversionOption").value;
    const codeInput = document.getElementById("codeInput").value;

    const url = 'http://localhost:8080/bot/chat2';
const requestBody = {
  prompt: `convert this given code ${codeInput} into ${selectedOption}`
};

const requestOptions = {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json', // Set the content type to JSON
  },
  body: JSON.stringify(requestBody), // Convert the JavaScript object to JSON string
};

    console.log(selectedOption);
    console.log(codeInput);
    e.preventDefault();
    //const request = new Request(`http://localhost:8080/bot/chat?prompt=convert this given code ${codeInput} into ${selectedOption}`);
    fetch(url,requestOptions)
    .then((response) => {
      if (response.ok) {
        return response.json();
      } else {
        throw new Error(response.statusText);
      }
    })
    .then((data) => {
      document.getElementById("responseDiv").innerText = data.content;
    })
    .catch((error) => {
      console.error(error);
    });
  });

  mybtn2.addEventListener("click",function(e){
    
    const codeInput = document.getElementById("codeInput").value;
    
    console.log(codeInput);

    const url = 'http://localhost:8080/bot/chat2';
const requestBody = {
  prompt: `please correct this code  ${codeInput}`
};

const requestOptions = {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json', // Set the content type to JSON
  },
  body: JSON.stringify(requestBody), // Convert the JavaScript object to JSON string
};

    e.preventDefault();
    //const request = new Request(`http://localhost:8080/bot/chat?prompt=please correct this code  ${codeInput}`);
    fetch(url,requestOptions)
    .then((response) => {
      if (response.ok) {
        return response.json();
      } else {
        throw new Error(response.statusText);
      }
    })
    .then((data) => {
      document.getElementById("responseDiv").innerText = data.content;
    })
    .catch((error) => {
      console.error(error);
    });
  });

  mybtn3.addEventListener("click",function(e){
    
    const codeInput = document.getElementById("codeInput").value;
    
    const url = 'http://localhost:8080/bot/chat2';
const requestBody = {
  prompt: `optimize this code ${codeInput}`
};

const requestOptions = {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json', // Set the content type to JSON
  },
  body: JSON.stringify(requestBody), // Convert the JavaScript object to JSON string
};

    console.log(codeInput);
    e.preventDefault();
    //const request = new Request(`http://localhost:8080/bot/chat?prompt=can you optimize this code ${codeInput}`);
    fetch(url,requestOptions)
    .then((response) => {
      if (response.ok) {
        return response.json();
      } else {
        throw new Error(response.statusText);
      }
    })
    .then((data) => {
      document.getElementById("responseDiv").innerText = data.content;
    })
    .catch((error) => {
      console.error(error);
    });
  });

  mybtn4.addEventListener("click",function(e){
  
    const codeInput = document.getElementById("codeInput").value;
    
    const url = 'http://localhost:8080/bot/chat2';
const requestBody = {
  prompt: `give me the time Complecity of this code ${codeInput}`
};

const requestOptions = {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json', // Set the content type to JSON
  },
  body: JSON.stringify(requestBody), // Convert the JavaScript object to JSON string
};

    console.log(codeInput);
    e.preventDefault();
    //const request = new Request(`http://localhost:8080/bot/chat?prompt=give me the time Complecity of this code ${codeInput}`);
    fetch(url,requestOptions)
    .then((response) => {
      if (response.ok) {
        return response.json();
      } else {
        throw new Error(response.statusText);
      }
    })
    .then((data) => {
      document.getElementById("responseDiv").innerText = data.content;
    })
    .catch((error) => {
      console.log("error in your code");
      console.error(error);
    });
  });
    
  

  
  
</script>
